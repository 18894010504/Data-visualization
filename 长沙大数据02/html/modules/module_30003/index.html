<div class="inner-box module_100001 module_30003">
    <div class="early-warning-map-info module_30003-01" style="background-color: rgba(6,34,54,0.9);">
        <!-- <div class="title">
            <div class="text">实时交通路况</div>
        </div> -->
        <div class="event-list-box module_20030-scroll">
            <ul class="event-list">
                <li class="error">
                    <div class="info">
                        <span>万家丽路高架（由北向南）</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>芙蓉中路（由南向北）</span>
                    </div>
                </li>
                <li class="error">
                    <div class="info">
                        <span>远大路立交桥（由东向西）</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>白沙湾路（双向）</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>白沙湾路与长沙大道十字（双向）</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>长沙大道（双向）</span>
                    </div>
                </li>
                <li class="error">
                    <div class="info">
                        <span>长沙大道（由西向东）辅路</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>玉兰路（三里垅小区段 双向）</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>重阳路玉兰路十字</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>杜英路（双向）</span>
                    </div>
                </li>
                <li class="error">
                    <div class="info">
                        <span>岳麓大道湘麓山庄段（由西向东）</span>
                    </div>
                </li>
                <li class="error">
                    <div class="info">
                        <span>岳麓大道实验学校十字</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>江东 三一大道（由西向东）</span>
                    </div>
                </li>
                <li class="error">
                    <div class="info">
                        <span> 三一大道（四方坪立交）</span>
                    </div>
                </li>
                <li class="error">
                    <div class="info">
                        <span>车站北路（由南向北）</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>学堂园路（双向）</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>双拥路（双向）</span>
                    </div>
                </li>
                <li class="error">
                    <div class="info">
                        <span>雅雀湖十字</span>
                    </div>
                </li>
                <li class="error">
                    <div class="info">
                        <span>韶山南路（三湘小区段）</span>
                    </div>
                </li>
                <li class="error">
                    <div class="info">
                        <span>香樟路（双向）</span>
                    </div>
                </li>
                <li class="error2">
                    <div class="info">
                        <span>曙光南路（由北向南）</span>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="early-warning-map-info module_30003-02" style="background-color: rgba(6,34,54,0.9);">
        <div class="title">
            <div class="text">重点景区路况</div>
        </div>
        <div class="event-list-box">
            <ul class="event-list eventlist">
                <li>
                    <div class="info">
                        <a href="#" rel="0">橘子洲</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="1">岳麓山风景名胜区</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="2">雷锋纪念馆</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="3">靖港古镇</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="4">天心阁 </a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="5">世界之窗</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="6">贾谊故居</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="7">马王堆汉墓</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="8">湘江风光带</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="9">长沙市博物馆 </a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="10">大围山国家森林公园</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="11">周洛大峡谷</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="12">石燕湖生态公园</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="13">长沙南郊公园</a>
                    </div>
                </li>
                <li>
                    <div class="info">
                        <a href="#" rel="14">长沙生态动物园</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div id="module_30003" class="box-chart map-noborder"></div>
    <div class="map-shawd-t"></div>
    <div class="map-shawd-b"></div>
    <div class="map-shawd-r"></div>
    <div class="map-shawd-l"></div>
</div>
<script type="text/javascript">
$(function() {
    var ul1 = parseInt($('.module_30003-01 .event-list').css("height"))
    var box1 = parseInt($('.module_30003-01 .event-list-box').css("height"))
    if (ul1 >= box1) {
        var _wrap1 = $('.module_30003-01 .event-list'); //定义滚动区域
        var _interval1 = 5000; //定义滚动间隙时间
        var _moving1; //需要清除的动画
        _wrap1.hover(function() {
            clearInterval(_moving1); //当鼠标在滚动区域中时,停止滚动
        }, function() {
            _moving1 = setInterval(function() {
                var _field = _wrap1.find('li:first'); //此变量不可放置于函数起始处,li:first取值是变化的
                var _h = _field.height(); //取得每次滚动高度
                _field.animate({
                    marginTop: -_h + 'px'
                }, 500, function() { //通过取负margin值,隐藏第一行
                    _field.css('marginTop', 0).appendTo(_wrap1); //隐藏后,将该行的margin值置零,并插入到最后,实现无缝滚动
                })
            }, _interval1) //滚动间隔时间取决于_interval
        }).trigger('mouseleave'); //函数载入时,模拟执行mouseleave,即自动滚动
    }
    // 滚动条
    $(".module_30003-01 .event-list-box").niceScroll({
        cursorcolor: "#1f4866",
        autohidemode: true,
        cursorwidth: "4px",
        cursorborderradius: 0
    });
});
$(function() {
    var ul2 = parseInt($('.module_30003-02 .event-list').css("height"))
    var box2 = parseInt($('.module_30003-02 .event-list-box').css("height"))
    if (ul2 >= box2) {
        var _wrap2 = $('.module_30003-02 .event-list'); //定义滚动区域
        var _interval2 = 5000; //定义滚动间隙时间
        var _moving2; //需要清除的动画
        _wrap2.hover(function() {
            clearInterval(_moving2); //当鼠标在滚动区域中时,停止滚动
        }, function() {
            _moving2 = setInterval(function() {
                var _field = _wrap2.find('li:first'); //此变量不可放置于函数起始处,li:first取值是变化的
                var _h = _field.height(); //取得每次滚动高度
                _field.animate({
                    marginTop: -_h + 'px'
                }, 500, function() { //通过取负margin值,隐藏第一行
                    _field.css('marginTop', 0).appendTo(_wrap2); //隐藏后,将该行的margin值置零,并插入到最后,实现无缝滚动
                })
            }, _interval2) //滚动间隔时间取决于_interval
        }).trigger('mouseleave'); //函数载入时,模拟执行mouseleave,即自动滚动
    }
    // 滚动条
    $(".module_30003-02 .event-list-box").niceScroll({
        cursorcolor: "#1f4866",
        autohidemode: true,
        cursorwidth: "4px",
        cursorborderradius: 0
    });
});

var module_30003 = echarts.init(document.getElementById('module_30003'), theme);
module_30003.showLoading({
    text: '拼命加载中',
    color: '#1abdd2',
    textColor: '#1abdd2',
    maskColor: 'rgba(6, 34, 54, 0.9)',
    zlevel: 9
});
$(function() {
    var map = new BMap.Map("module_30003");
    map.setMapStyle({
        styleJson: [{
                "featureType": "water",
                "elementType": "all",
                "stylers": {
                    "color": "#021019"
                }
            },
            {
                "featureType": "highway",
                "elementType": "geometry.fill",
                "stylers": {
                    "color": "#2f0000"
                }
            },
            {
                "featureType": "highway",
                "elementType": "geometry.stroke",
                "stylers": {
                    "color": "#6b0000"
                }
            },
            {
                "featureType": "arterial",
                "elementType": "geometry.fill",
                "stylers": {
                    "color": "#073763"
                }
            },
            {
                "featureType": "arterial",
                "elementType": "geometry.stroke",
                "stylers": {
                    "color": "#145b89"
                }
            },
            {
                "featureType": "local",
                "elementType": "geometry.fill",
                "stylers": {
                    "color": "#0f486d"
                }
            },
            {
                "featureType": "land",
                "elementType": "all",
                "stylers": {
                    "color": "#062236"
                }
            },
            {
                "featureType": "railway",
                "elementType": "geometry.fill",
                "stylers": {
                    "color": "#0b5394"
                }
            },
            {
                "featureType": "railway",
                "elementType": "geometry.stroke",
                "stylers": {
                    "color": "#000000"
                }
            },
            {
                "featureType": "subway",
                "elementType": "geometry.stroke",
                "stylers": {
                    "color": "#073763"
                }
            },
            {
                "featureType": "building",
                "elementType": "geometry.fill",
                "stylers": {
                    "color": "#000000"
                }
            },
            {
                "featureType": "all",
                "elementType": "labels.text.fill",
                "stylers": {
                    "color": "#857f7f"
                }
            },
            {
                "featureType": "all",
                "elementType": "labels.text.stroke",
                "stylers": {
                    "color": "#000000"
                }
            },
            {
                "featureType": "building",
                "elementType": "geometry",
                "stylers": {
                    "color": "#013a5e"
                }
            },
            {
                "featureType": "green",
                "elementType": "geometry.fill",
                "stylers": {
                    "color": "#0d2700"
                }
            },
            {
                "featureType": "boundary",
                "elementType": "all",
                "stylers": {
                    "color": "#1e1c1c"
                }
            },
            {
                "featureType": "manmade",
                "elementType": "all",
                "stylers": {
                    "color": "#022338"
                }
            },
            {
                "featureType": "poi",
                "elementType": "labels",
                "stylers": {
                    "visibility": "off"
                }
            },
            {
                "featureType": "local",
                "elementType": "geometry.stroke",
                "stylers": {
                    "color": "#1770aa"
                }
            },
            {
                "featureType": "all",
                "elementType": "labels",
                "stylers": {
                    "visibility": "off"
                }
            },
            {
                "featureType": "arterial",
                "elementType": "labels",
                "stylers": {
                    "visibility": "on"
                }
            },
            {
                "featureType": "railway",
                "elementType": "labels",
                "stylers": {
                    "visibility": "on"
                }
            },
            {
                "featureType": "subway",
                "elementType": "labels",
                "stylers": {
                    "visibility": "on"
                }
            },
            {
                "featureType": "highway",
                "elementType": "labels",
                "stylers": {
                    "visibility": "on"
                }
            },
            {
                "featureType": "green",
                "elementType": "geometry.stroke",
                "stylers": {
                    "color": "#38761d"
                }
            }
        ]
    });
    map.centerAndZoom(new BMap.Point(113.00, 28.21), 13);
    var ctrl = new BMapLib.TrafficControl({
        showPanel: false //是否显示路况提示面板
    });
    map.addControl(ctrl);
    ctrl.setOffset(new BMap.Size(30, 30));
    ctrl.setAnchor(BMAP_ANCHOR_BOTTOM_RIGHT);
    // ctrl.showTraffic();

    map.enableScrollWheelZoom();

    /*$('#tcWrap').removeClass('maplibTcHide');
    $('#tcBtn').removeClass('maplibTcBtnOff_deskTop');*/

    $('#tcBtn').click();

    var ddat = [{
        x: 112.968932,
        y: 28.20109
    }, {
        x: 112.942696,
        y: 28.189858
    }, {
        x: 112.851515,
        y: 28.209877
    }, {
        x: 112.792067,
        y: 28.461367
    }, {
        x: 112.98794,
        y: 28.189261
    }, {
        x: 113.061306,
        y: 28.242997
    }, {
        x: 112.978491,
        y: 28.198182
    }, {
        x: 113.033886,
        y: 28.211758
    }, {
        x: 112.974167,
        y: 28.18189
    }, {
        x: 112.987725,
        y: 28.247398
    }, {
        x: 114.089947,
        y: 28.428199
    }, {
        x: 113.67467,
        y: 28.435651
    }, {
        x: 113.095189,
        y: 28.015487
    }, {
        x: 112.972174,
        y: 28.14673
    }, {
        x: 113.009605,
        y: 28.037752
    }]

    $('.module_30003-02 li').click(function() {
        $(this).addClass('active').siblings().removeClass('active');
        var i = $(this).find('a').attr("rel");
        var xx = ddat[i].x;
        var yy = ddat[i].y;
        map.centerAndZoom(new BMap.Point(xx, yy), 17);
    });

    // 复杂的自定义覆盖物
    function ComplexCustomOverlay(point) {
        this._point = point;
    }
    ComplexCustomOverlay.prototype = new BMap.Overlay();
    ComplexCustomOverlay.prototype.initialize = function(mp) {
        this._map = mp;
        var div = this._div = document.createElement("div");
        div.style.position = "absolute";
        div.style.backgroundColor = "#2de7ff";
        div.style.border = "4px solid #fff";
        div.style.borderRadius = "32px";
        div.style.width = "28px";
        div.style.height = "28px";
        div.style.boxShadow = "0 0 20px rgba(255, 255, 255, 0.8)"

        map.getPanes().labelPane.appendChild(div);

        return div;
    }
    ComplexCustomOverlay.prototype.draw = function() {
        var m = this._map;
        var pixel = m.pointToOverlayPixel(this._point);
        this._div.style.left = pixel.x - 0 + "px";
        this._div.style.top = pixel.y - 0 + "px";
    }

    for (var i = 0; i < ddat.length; i++) {
        var pt = new BMap.Point(ddat[i].x, ddat[i].y);
        var myCompOverlay = new ComplexCustomOverlay(pt);
        map.addOverlay(myCompOverlay);
    }
});
</script>